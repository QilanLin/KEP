# ğŸ“– Isabelle Sledgehammer Fuzzer ä½¿ç”¨æŒ‡å—

**å®Œæ•´çš„ä½¿ç”¨æŒ‡å—å’Œæœ€ä½³å®è·µ**

---

## ğŸ“‹ ç›®å½•

1. [å¿«é€Ÿå…¥é—¨](#å¿«é€Ÿå…¥é—¨)
2. [è¯¦ç»†é…ç½®](#è¯¦ç»†é…ç½®)
3. [ç»„ä»¶ä½¿ç”¨](#ç»„ä»¶ä½¿ç”¨)
4. [é«˜çº§åŠŸèƒ½](#é«˜çº§åŠŸèƒ½)
5. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
6. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)

---

## ğŸš€ å¿«é€Ÿå…¥é—¨

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

ç¡®ä¿å·²å®‰è£…ï¼š

```bash
# æ£€æŸ¥Python
python3 --version  # éœ€è¦3.8+

# æ£€æŸ¥Z3
which z3
z3 --version

# æ£€æŸ¥cvc5ï¼ˆå¯é€‰ï¼‰
which cvc5
cvc5 --version
```

### ç¬¬äºŒæ­¥ï¼šå‡†å¤‡ç§å­æ–‡ä»¶

ç§å­æ–‡ä»¶åº”è¯¥æ˜¯TPTPæ ¼å¼ï¼ˆ`.p`æ‰©å±•åï¼‰ã€‚

```bash
# ç¤ºä¾‹ç§å­æ–‡ä»¶ç›®å½•ç»“æ„
sledgehammer_export/
â”œâ”€â”€ prob4729488_1_proof.p
â”œâ”€â”€ prob5453912_1.p
â””â”€â”€ ...
```

### ç¬¬ä¸‰æ­¥ï¼šè¿è¡ŒåŸºæœ¬æµ‹è¯•

```bash
cd fuzzer
python3 main.py --max-seeds 2 --num-mutants 3
```

### ç¬¬å››æ­¥ï¼šæŸ¥çœ‹ç»“æœ

```bash
# æŸ¥çœ‹è¾“å‡ºç›®å½•
ls -la fuzzer_results/

# æŸ¥çœ‹æ—¥å¿—
cat fuzzer_results/logs/fuzzer_*.log

# æŸ¥çœ‹ç»Ÿè®¡
cat fuzzer_results/stats/stats.json | python3 -m json.tool
```

---

## âš™ï¸ è¯¦ç»†é…ç½®

### å‘½ä»¤è¡Œå‚æ•°è¯¦è§£

#### `--seed-dir`

æŒ‡å®šç§å­æ–‡ä»¶ç›®å½•ã€‚

```bash
python3 main.py --seed-dir /path/to/seeds
```

**é»˜è®¤å€¼**: `../sledgehammer_export`

#### `--output-dir`

æŒ‡å®šè¾“å‡ºç›®å½•ã€‚

```bash
python3 main.py --output-dir /path/to/results
```

**é»˜è®¤å€¼**: `./fuzzer_results`

**è¾“å‡ºç»“æ„**:
```
output_dir/
â”œâ”€â”€ logs/              # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ stats/             # ç»Ÿè®¡ä¿¡æ¯
â”œâ”€â”€ bug_*.json        # BugæŠ¥å‘Š
â””â”€â”€ differential_*.json # å·®å¼‚æŠ¥å‘Š
```

#### `--timeout`

è®¾ç½®proverè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚

```bash
python3 main.py --timeout 10.0
```

**é»˜è®¤å€¼**: `5.0`

**å»ºè®®**:
- å°è§„æ¨¡æµ‹è¯•: 3-5ç§’
- ä¸­ç­‰è§„æ¨¡: 5-10ç§’
- å¤§è§„æ¨¡: 10-30ç§’

#### `--num-mutants`

æ¯ä¸ªç§å­ç”Ÿæˆçš„å˜å¼‚ä½“æ•°é‡ã€‚

```bash
python3 main.py --num-mutants 20
```

**é»˜è®¤å€¼**: `10`

**å»ºè®®**:
- å¿«é€Ÿæµ‹è¯•: 3-5ä¸ª
- å¸¸è§„æµ‹è¯•: 10-20ä¸ª
- æ·±åº¦æµ‹è¯•: 20-50ä¸ª

#### `--max-seeds`

æœ€å¤§å¤„ç†çš„ç§å­æ–‡ä»¶æ•°é‡ã€‚

```bash
python3 main.py --max-seeds 50
```

**é»˜è®¤å€¼**: `10`

**å»ºè®®**:
- å¼€å‘è°ƒè¯•: 2-5ä¸ª
- åŠŸèƒ½æµ‹è¯•: 10-20ä¸ª
- å¤§è§„æ¨¡æµ‹è¯•: 50-100+ä¸ª

### é…ç½®ç¤ºä¾‹

#### ç¤ºä¾‹1: å¿«é€ŸéªŒè¯

```bash
python3 main.py \
    --max-seeds 2 \
    --num-mutants 3 \
    --timeout 3.0
```

#### ç¤ºä¾‹2: å¸¸è§„æµ‹è¯•

```bash
python3 main.py \
    --max-seeds 10 \
    --num-mutants 10 \
    --timeout 5.0
```

#### ç¤ºä¾‹3: å¤§è§„æ¨¡æµ‹è¯•

```bash
python3 main.py \
    --max-seeds 50 \
    --num-mutants 20 \
    --timeout 10.0
```

#### ç¤ºä¾‹4: æ·±åº¦åˆ†æ

```bash
python3 main.py \
    --max-seeds 100 \
    --num-mutants 50 \
    --timeout 30.0 \
    --output-dir ./deep_analysis
```

---

## ğŸ”§ ç»„ä»¶ä½¿ç”¨

### 1. TPTPè§£æå™¨

**æ–‡ä»¶**: `parser/tptp_parser.py`

**ä½¿ç”¨ç¤ºä¾‹**:

```python
from parser.tptp_parser import TPTPParser

parser = TPTPParser()

# è¯»å–æ–‡ä»¶
with open('seed.p', 'r') as f:
    content = f.read()

# è§£æ
formulas = parser.parse(content)
conjectures = parser.extract_conjectures(content)

print(f"æ‰¾åˆ° {len(formulas)} ä¸ªå…¬å¼")
print(f"æ‰¾åˆ° {len(conjectures)} ä¸ªconjecture")
```

### 2. Tokenå˜å¼‚å™¨

**æ–‡ä»¶**: `mutator/token_mutator.py`

**ä½¿ç”¨ç¤ºä¾‹**:

```python
from mutator.token_mutator import TokenMutator

mutator = TokenMutator()

# ç”Ÿæˆå˜å¼‚ä½“
mutants = mutator.generate_mutants(seed_content, count=10)

for i, mutant in enumerate(mutants, 1):
    print(f"å˜å¼‚ä½“ {i}: {len(mutant)} å­—ç¬¦")
```

**å˜å¼‚ç­–ç•¥**:

- `_mutate_numeric`: æ•°å€¼æ›¿æ¢
- `_mutate_symbols`: ç¬¦å·æ›¿æ¢
- `_mutate_operators`: æ“ä½œç¬¦æ›¿æ¢
- `_mutate_brackets`: æ‹¬å·æ“ä½œ
- `_mutate_strings`: å­—ç¬¦ä¸²å˜å¼‚

### 3. Crash Oracle

**æ–‡ä»¶**: `oracle/crash_oracle.py`

**ä½¿ç”¨ç¤ºä¾‹**:

```python
from oracle.crash_oracle import CrashOracle, OracleResult

oracle = CrashOracle(timeout=5.0)

# æ£€æŸ¥prover
result = oracle.check('/usr/bin/z3', 'test.p')

if oracle.is_bug(result):
    if result.status == OracleResult.CRASH:
        print(f"Proverå´©æºƒ: {result.error_message}")
    elif result.status == OracleResult.TIMEOUT:
        print(f"Proverè¶…æ—¶")
else:
    print(f"Proveræ­£å¸¸: {result.status.value}")
    print(f"è¾“å‡º: {result.output}")
```

### 4. Differential Oracle

**æ–‡ä»¶**: `oracle/differential_oracle.py`

**ä½¿ç”¨ç¤ºä¾‹**:

```python
from oracle.differential_oracle import DifferentialOracle
from oracle.crash_oracle import OracleResult

diff_oracle = DifferentialOracle()

# æ”¶é›†å¤šä¸ªproverç»“æœ
prover_results = {
    'z3': OracleResult.SAT,
    'cvc5': OracleResult.UNSAT
}

# æ£€æŸ¥å·®å¼‚
diff_result = diff_oracle.check(prover_results)

if diff_oracle.is_bug(diff_result):
    print(f"å‘ç°å·®å¼‚: {diff_result.error_message}")
```

### 5. ç»Ÿè®¡æ”¶é›†å™¨

**æ–‡ä»¶**: `utils/stats.py`

**ä½¿ç”¨ç¤ºä¾‹**:

```python
from utils.stats import StatsCollector

collector = StatsCollector(output_dir='./stats')

# è®°å½•æµ‹è¯•
collector.record_test(execution_time=1.5)
collector.record_seed(mutants_generated=10)
collector.record_crash({'bug_type': 'crash', 'prover': 'z3'})

# ä¿å­˜ç»Ÿè®¡
collector.save_stats('my_stats.json')
collector.print_summary()
```

### 6. æ—¥å¿—è®°å½•å™¨

**æ–‡ä»¶**: `utils/logger.py`

**ä½¿ç”¨ç¤ºä¾‹**:

```python
from utils.logger import FuzzerLogger

logger = FuzzerLogger(log_dir='./logs')

logger.info("Fuzzerå¼€å§‹è¿è¡Œ")
logger.test_start("seed1", 1)
logger.bug_found("crash", "Z3å´©æºƒ")
logger.error("å¤„ç†å¤±è´¥")
```

---

## ğŸ¯ é«˜çº§åŠŸèƒ½

### æ‰¹é‡æµ‹è¯•

ä½¿ç”¨æ‰¹é‡æµ‹è¯•è„šæœ¬è¿›è¡Œå¤§è§„æ¨¡æµ‹è¯•ï¼š

```bash
./æ‰¹é‡æµ‹è¯•è„šæœ¬.sh
```

è„šæœ¬é…ç½®ï¼ˆå¯ç¼–è¾‘è„šæœ¬ä¿®æ”¹ï¼‰:
- æœ€å¤§ç§å­æ•°: 20
- æ¯ä¸ªç§å­å˜å¼‚ä½“æ•°: 10
- è¶…æ—¶æ—¶é—´: 5.0ç§’

### ç»“æœåˆ†æ

ä½¿ç”¨ç»“æœåˆ†æå·¥å…·ï¼š

```bash
python3 åˆ†æç»“æœ.py ./results
```

**è¾“å‡º**:
- åŸºæœ¬ç»Ÿè®¡
- Bugç±»å‹åˆ†å¸ƒ
- Proverä½¿ç”¨ç»Ÿè®¡
- Bugè¯¦æƒ…
- å·®å¼‚è¯¦æƒ…

### è‡ªå®šä¹‰é…ç½®

åœ¨Pythonä»£ç ä¸­è‡ªå®šä¹‰é…ç½®ï¼š

```python
from main import Fuzzer

config = {
    'seed_dir': '../seeds',
    'output_dir': './custom_results',
    'timeout': 10.0,
    'num_mutants': 20,
    'max_seeds': 50
}

fuzzer = Fuzzer(config)
fuzzer.run()
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æµ‹è¯•ç­–ç•¥

#### æ¸è¿›å¼æµ‹è¯•

```bash
# ç¬¬ä¸€æ­¥: å¿«é€ŸéªŒè¯ï¼ˆ2ä¸ªç§å­ï¼Œ3ä¸ªå˜å¼‚ä½“ï¼‰
python3 main.py --max-seeds 2 --num-mutants 3

# ç¬¬äºŒæ­¥: å°è§„æ¨¡æµ‹è¯•ï¼ˆ5ä¸ªç§å­ï¼Œ10ä¸ªå˜å¼‚ä½“ï¼‰
python3 main.py --max-seeds 5 --num-mutants 10

# ç¬¬ä¸‰æ­¥: ä¸­ç­‰è§„æ¨¡ï¼ˆ10ä¸ªç§å­ï¼Œ10ä¸ªå˜å¼‚ä½“ï¼‰
python3 main.py --max-seeds 10 --num-mutants 10

# ç¬¬å››æ­¥: å¤§è§„æ¨¡ï¼ˆ20+ä¸ªç§å­ï¼Œ20+ä¸ªå˜å¼‚ä½“ï¼‰
./æ‰¹é‡æµ‹è¯•è„šæœ¬.sh
```

#### è¶…æ—¶è®¾ç½®

- **å¿«é€ŸéªŒè¯**: 3ç§’
- **å¸¸è§„æµ‹è¯•**: 5-10ç§’
- **æ·±åº¦åˆ†æ**: 10-30ç§’

### 2. ç»“æœç®¡ç†

#### ç»„ç»‡è¾“å‡ºç›®å½•

```bash
# æŒ‰æ—¥æœŸç»„ç»‡
results/
â”œâ”€â”€ 2025-11-20/
â”‚   â”œâ”€â”€ quick_test/
â”‚   â”œâ”€â”€ medium_test/
â”‚   â””â”€â”€ large_test/
```

#### å®šæœŸåˆ†æ

```bash
# æ¯å¤©åˆ†æç»“æœ
python3 åˆ†æç»“æœ.py ./results/2025-11-20/large_test
```

### 3. æ€§èƒ½ä¼˜åŒ–

#### å¹¶è¡Œå¤„ç†ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰

ç›®å‰æ˜¯é¡ºåºå¤„ç†ï¼Œæœªæ¥å¯æ·»åŠ å¹¶è¡Œæ”¯æŒã€‚

#### èµ„æºç®¡ç†

- æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- å®šæœŸæ¸…ç†æ—§ç»“æœ
- ç›‘æ§ç£ç›˜ç©ºé—´

### 4. é”™è¯¯å¤„ç†

#### æ£€æŸ¥æ—¥å¿—

```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep ERROR results/logs/fuzzer_*.log
```

#### éªŒè¯Prover

```bash
# æµ‹è¯•Z3
echo "(assert true)" | z3 -smt2 -in

# æµ‹è¯•cvc5
echo "(assert true)" | cvc5 --lang=smt2
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1: Proveræœªæ‰¾åˆ°

**ç—‡çŠ¶**:
```
âš ï¸  è­¦å‘Š: Z3æœªæ‰¾åˆ°ï¼Œè·³è¿‡Z3æµ‹è¯•
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥Z3è·¯å¾„
which z3

# å¦‚æœæœªæ‰¾åˆ°ï¼Œæ·»åŠ åˆ°PATH
export PATH=$PATH:/path/to/z3

# æˆ–åˆ›å»ºç¬¦å·é“¾æ¥
ln -s /path/to/z3 /usr/local/bin/z3
```

### é—®é¢˜2: ç§å­æ–‡ä»¶ä¸å­˜åœ¨

**ç—‡çŠ¶**:
```
âŒ æœªæ‰¾åˆ°ç§å­æ–‡ä»¶: ../sledgehammer_export
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç§å­ç›®å½•
ls -la ../sledgehammer_export/

# æ£€æŸ¥æ–‡ä»¶æ ¼å¼
file ../sledgehammer_export/*.p

# ç¡®ä¿è·¯å¾„æ­£ç¡®
python3 main.py --seed-dir /absolute/path/to/seeds
```

### é—®é¢˜3: æƒé™é”™è¯¯

**ç—‡çŠ¶**:
```
PermissionError: [Errno 13] Permission denied
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç›®å½•æƒé™
ls -ld output_dir

# ä¿®æ”¹æƒé™
chmod 755 output_dir

# æˆ–ä½¿ç”¨å…¶ä»–ç›®å½•
python3 main.py --output-dir ./my_results
```

### é—®é¢˜4: å†…å­˜ä¸è¶³

**ç—‡çŠ¶**:
```
MemoryError
```

**è§£å†³æ–¹æ¡ˆ**:
- å‡å°‘å˜å¼‚ä½“æ•°é‡: `--num-mutants 5`
- å‡å°‘ç§å­æ•°é‡: `--max-seeds 5`
- æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- å¢åŠ ç³»ç»Ÿå†…å­˜

### é—®é¢˜5: è¶…æ—¶è¿‡å¤š

**ç—‡çŠ¶**:
```
è¶…æ—¶æ•°: 100
```

**è§£å†³æ–¹æ¡ˆ**:
- å¢åŠ è¶…æ—¶æ—¶é—´: `--timeout 10.0`
- æ£€æŸ¥proveræ€§èƒ½
- å‡å°‘å˜å¼‚ä½“æ•°é‡

---

## ğŸ“Š ç¤ºä¾‹å·¥ä½œæµ

### å®Œæ•´æµ‹è¯•å·¥ä½œæµ

```bash
# 1. å‡†å¤‡ç¯å¢ƒ
cd fuzzer
which z3 cvc5

# 2. å¿«é€ŸéªŒè¯
python3 main.py --max-seeds 2 --num-mutants 3 --timeout 3.0

# 3. æŸ¥çœ‹ç»“æœ
python3 åˆ†æç»“æœ.py ./fuzzer_results

# 4. ä¸­ç­‰è§„æ¨¡æµ‹è¯•
python3 main.py --max-seeds 10 --num-mutants 10 --timeout 5.0

# 5. å¤§è§„æ¨¡æµ‹è¯•
./æ‰¹é‡æµ‹è¯•è„šæœ¬.sh

# 6. åˆ†ææ‰€æœ‰ç»“æœ
python3 åˆ†æç»“æœ.py ./large_scale_results
```

---

## ğŸ“š ç›¸å…³èµ„æº

- [é¡¹ç›®README](./README.md)
- [ç ”ç©¶è¿›åº¦æŠ¥å‘Š](../ç ”ç©¶è¿›å±•å®Œæ•´æ€»ç»“.md)
- [Week 3-4è®¡åˆ’](../Week3-4å·¥ä½œè®¡åˆ’.md)

---

**åˆ›å»ºæ—¥æœŸ**: 2025-11-20  
**ç‰ˆæœ¬**: 1.0

